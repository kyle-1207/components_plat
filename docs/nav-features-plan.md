# 导航子功能需求方案（基于当前导航：标准服务 / 器件查询 / 采购服务 / 应用支持 / 质量管理 / 试验检测 / 资料培训）

> 目标：在现有搜索与分面方案基础上，结合 doEEEt 官网可见功能细化需求，覆盖导航子功能的业务目标、核心功能、数据与接口要点、前端交互要点和验收标准。保持 Mongo + Redis 架构，不接入 Elasticsearch。

## 总体原则
- 体验一致：统一导航与面包屑、统一搜索条样式、统一权限与消息提示。
- API 一致：REST 风格，错误码统一，分页与排序参数统一。
- 性能可控：热点接口加缓存，分面截断，分页必须索引。
- 安全与合规：登录态/JWT，占位权限模型，敏感操作审计日志。

## 模块需求概要（对标 doEEEt 官网能力）

### 1) 标准服务（标准文档与合规）
- 目标：集中管理 MIL/ESCC/ISO/GB 等标准文档，支持搜索、版本管理和合规检查，并与器件/试验/采购联动。
- 核心功能：
  - 标准库：分类（体系/领域/版本），全文/关键词搜索，标签；版本/替代链；状态（现行/废止/替代）。
  - 合规关联：标准条款与器件/型号/批次关联；基于器件或批次生成合规检查结果。
  - 下载与权限：受控下载、访问权限、下载日志；水印占位。
- 数据与接口要点：
  - 元数据：标准号、名称、版本、状态、发布日期、替代关系、文件指针。
  - 关联：standard_id ↔ component_id/sku_id/batch_id；可溯源到试验报告/质量事件。
  - 接口：标准搜索、详情、版本列表、替代链、关联查询、合规检查结果拉取。
- 前端交互：
  - 目录+搜索+过滤（体系/状态/发布日期）。
  - 详情页：版本切换、替代提示、关联器件列表、关联试验/质量/采购入口。
  - 合规结果：可导出，按器件/批次筛选。
- 验收：
  - 搜索响应 <500ms；版本/替代链正确；合规关联可查可导出；权限/下载日志有效。

### 2) 器件查询（核心搜索、分面、对比、清单）
- 目标：分类/关键词/参数搜索，分面筛选，组件详情，对比，清单（DCL/BOM），快速报价入口。
- 核心功能：
  - 搜索与分面：分类树、制造商、质量/库存/生命周期等分面（详见 facets-plan）；分页、排序、导出。
  - 详情：基本信息、参数、相关标准、试验/质量事件摘要、供应/库存占位、资料下载入口。
  - 对比（Comparator 对标）：多选组件参数对比，差异高亮，导出对比报告。
  - 清单（DCL/BOM）：将器件加入清单，支持导入/导出、分享。
  - 快速报价入口：从详情或清单触发 RFQ/报价请求（跳转采购服务）。
- 前端交互：
  - 左滤右表，分面多选+chips 清除；“展开更多”分面。
  - 对比选择框、对比抽屉/页面；清单加入/查看；最近浏览/收藏。
- 验收：
  - 分面排序/缓存/分页正常；对比可用；清单导入导出正常；RFQ 跳转畅通。

### 3) 采购服务（Proposal Next / RFQ / 订单）
- 目标：支持“添加清单或购物车式 RFQ”→ 询价/报价 → 确认/下单/跟踪；对标 doEEEt Proposal Next 与 ESA Stockplace 风格的特定项目库存入口。
- 核心功能：
  - RFQ 创建：从搜索/详情/清单加入；支持文件上传（BOM/DCL）；供应商多选或系统分派。
  - 报价收集与对比：价格、交期、MOQ、币种、有效期；对比视图；导出。
  - 订单/意向单：下单占位，交付状态（在产/在途/到货），异常记录。
  - 项目/库存入口：特定项目库存（类似 ESA Stockplace）查询与申请。
- 数据与接口要点：
  - 模型：需求/报价/订单；清单项与器件关联；供应商信息。
  - 流程：状态流转（草稿→询价→报价→确认→关闭/下单），操作日志。
  - 附件：RFQ/BOM 上传元数据；报价单附件指针。
- 前端交互：
  - RFQ 表单（支持上传）；报价对比表；状态时间线；导出。
  - “添加到 RFQ/购物车”入口复用全站。
- 验收：
  - RFQ→报价→确认链路可走通；报价对比/导出可用；状态可追踪；项目库存入口可查询可申请。

### 4) 应用支持（资源、博客/活动、咨询）
- 目标：提供设计辅助与技术支持资源，包含技术博客、活动/研讨会、工单/咨询，数字模型入口。
- 核心功能：
  - 资源库：按场景/器件类型筛选，搜索；下载权限、记录。
  - 技术博客/活动：列表、分类、搜索、详情、报名/回看/资料下载。
  - 咨询/工单：创建、分派、状态（待响应/处理中/已解决）、追问记录。
  - 数字模型元数据：IBIS/SPICE/S 参数/热仿真模型入口，占位下载。
- 数据与接口要点：
  - 元数据：标题、标签、关联器件、版本/时间、附件。
  - 工单：分类、优先级、状态、处理人、日志。
- 前端交互：
  - 资源筛选/搜索；下载提示；活动报名/回看；工单时间线。
- 验收：
  - 资源可筛选下载且有记录；活动可报名/回看；工单可创建、查询、更新状态。

### 5) 质量管理（事件全生命周期）
- 目标：质量事件全生命周期管理，并与器件、批次、试验、供应商表现联动。
- 核心功能：
  - 质量问题上报：分类、严重度、批次/器件关联、证据上传。
  - 流程与分配：状态（新建/分析/整改/验证/关闭），指派、超时提醒。
  - 归零/措施：根因分析占位、纠正措施、验证记录。
  - 通报：范围控制、阅读确认；与关联器件/供应商/批次联动。
  - 报表：问题清单、状态分布、按供应商/批次统计。
- 验收：
  - 上报→关闭链路通；指派/提醒记录；通报可发布/确认；关联查询可达。

### 6) 试验检测（Laboratory Services 对标）
- 目标：管理试验申请、计划、执行与报告，对标 Laboratory Services，可支持多测试项组合报价。
- 核心功能：
  - 试验申请：类型（TID/SEE/DD/常规等）、样品/条件、期望时间；可组合多项。
  - 报价/审批：对申请出报价，审批后进入计划。
  - 计划与执行：排期、状态（待排期/进行中/已完成）、实验室/设备信息。
  - 报告管理：报告元数据、版本、下载权限；结果摘要。
  - 数据上传占位：原始数据元数据。
- 验收：
  - 申请→报价→计划→报告链路通；状态正确；报告可下载（权限提示）；多测试项可组合。

### 7) 资料培训（课程/资料、活动/研讨）
- 目标：集中培训与资料下载，记录学习行为；支持活动/研讨会报名与回看。
- 核心功能：
  - 课程/资料库：按主题/角色/模块分类；搜索；下载/在线观看。
  - 活动/研讨：报名、日历、回看、资料下载。
  - 进度与记录：学习完成度占位，下载记录。
- 验收：
  - 课程/资料可搜可下/可看；活动可报名回看；记录可查询。

### 8) 首页与全局
- 目标：统一入口、快速搜索、推荐与跳转。
- 核心功能：
  - 全局搜索框：跳转到器件查询页并带入关键字。
  - 快捷入口：Comparator（对比）、BOM/DCL 清单、报价请求、试验检测申请、标准库、活动/博客。
  - 热门搜索/推荐；公告/通告。
- 验收：
  - 搜索跳转正确；入口可达；公告可见可配置。

## 技术与非功能需求（补充）
- API 统一：分页、排序、错误码、鉴权头一致；OpenAPI 契约。
- 缓存：分类树与 facets 使用 Redis；RFQ/报价列表可缓存短 TTL；空结果短 TTL 防穿透。
- 索引：按查询条件建立（familyPath、manufacturer、quality_grade、stock_status、lifecycle 等）；RFQ/订单/试验申请按状态+时间索引；慢查询跟踪。
- 安全：JWT 登录；基础权限占位；下载/导出记录；输入输出校验（前端 DOMPurify 用于富文本/HTML）；文件上传校验（BOM/DCL）。
- 日志与监控：请求/错误日志、缓存命中率、关键接口 P95；审计操作（创建/更新/下载/导出/上传）；RFQ/试验/质量流程的状态日志。

## 验收与里程碑（建议）
- M1（1-2 周）：器件查询分面上线（参考 facets-plan）、首页全局搜索跳转、导航与路由打通；对比与清单（基本版）。
  - 关键验收：分面/分页/排序/导出；对比多选与差异高亮；清单导入导出。
- M2（2-3 周）：标准服务最小闭环（标准库、版本、替代链、下载日志）；采购 RFQ→报价→确认闭环；质量上报与状态流转闭环。
  - 关键验收：标准关联与下载日志；RFQ 流程与报价对比；质量问题全链路。
- M3（2-3 周）：试验申请→报价→计划→报告链路；应用支持资源库与工单；资料培训库与活动报名/回看；项目/特定库存入口。
  - 关键验收：试验报告下载与权限；活动报名/回看；项目库存申请。
- 持续：性能监控、权限细化、可选分面与高级筛选、报表导出、收藏/最近浏览/订阅推送。
# 导航子功能需求方案（基于当前导航：标准服务 / 器件查询 / 采购服务 / 应用支持 / 质量管理 / 试验检测 / 资料培训）

> 目标：在现有搜索与分面方案基础上，覆盖导航栏子功能的需求框架，明确每个模块的业务目标、核心功能、数据与接口要点、前端交互要点和验收标准。保持 Mongo + Redis 架构，不接入 Elasticsearch。

## 总体原则
- 体验一致：统一导航与面包屑、统一搜索条样式、统一权限与消息提示。
- API 一致：REST 风格，错误码统一，分页与排序参数统一。
- 性能可控：热点接口加缓存，分面截断，分页必须索引。
- 安全与合规：登录态/JWT，占位权限模型，敏感操作审计日志。

## 模块需求概要

### 1) 标准服务（标准文档与合规）
- 目标：集中管理 MIL/ESCC/ISO/GB 等标准文档，支持搜索、版本管理和合规检查。
- 核心功能：
  - 标替代）准库：分类（体系/领域/版本），全文/关键词搜索，标签。
  - 版本管理：版本号、发布日期、状态（现行/废止/、变更记录。
  - 合规关联：将标准条款与器件/型号/批次建立关联；生成合规检查结果。
  - 下载与权限：可控下载、访问权限；下载日志。
- 数据与接口要点：
  - 文档元数据：标准号、名称、版本、状态、发布日期、替代关系。
  - 关联：standard_id ↔ component_id/sku_id/batch_id。
  - 接口：标准搜索、详情、版本列表、关联查询、合规检查结果拉取。
- 前端交互：
  - 目录+搜索+过滤（体系/状态/发布日期）。
  - 标准详情页：版本切换、替代提示、关联器件列表。
  - 合规结果：可导出，支持按器件筛选。
- 验收：
  - 标准搜索响应 <500ms；版本切换与替代链显示正确；合规关联可查询且可导出。

### 2) 器件查询（核心搜索与分面）
- 目标：基于分类/关键词/参数搜索，分面筛选，组件详情与导出。
- 核心功能：已在 `facets-plan.md`；此处强调与全站联动：
  - 与标准服务联动：在器件详情显示相关标准；支持跳转。
  - 与采购/质量/试验/培训联动：详情页展示关联的采购状态、质量事件、试验报告、培训材料入口。
- 验收：
  - 分面排序、缓存、分页与 chips 正常；详情页联动卡片可跳转对应模块。

### 3) 采购服务
- 目标：支持需求 → 询价 → 报价 → 下单/跟踪的轻量流程。
- 核心功能：
  - 需求管理：创建需求（型号/数量/期望交期/等级），状态流转（草稿→询价→报价→确认/关闭）。
  - 询价与报价：RFQ 创建，供应商多选，报价收集与对比（价格、交期、MOQ、币种、有效期）。
  - 订单/跟踪：下单占位（可先为“意向单”），交付状态跟踪（在产/在途/到货），异常记录。
  - 供应商库：供应商档案、资质、历史表现评分。
- 数据与接口要点：
  - 需求/报价/订单模型；供应商基础信息与评级。
  - 报价对比接口；状态更新接口；附件（报价单）上传元数据。
- 前端交互：
  - 需求表单（校验）；报价对比表；状态时间线；异常标记。
  - 导出：报价对比/需求单。
- 验收：
  - 需求到报价全链路可走通；报价对比可视；状态流转可追踪；导出可用。

### 4) 应用支持
- 目标：为工程师提供设计辅助与技术支持资源。
- 核心功能：
  - 案例与应用笔记：按应用场景/器件类型筛选，支持搜索。
  - 设计参考/最佳实践：可下载文档，版本管理。
  - 技术问答/工单占位：创建咨询，状态（待响应/处理中/已解决），内部可指派。
  - 数字模型入口占位：IBIS/SPICE/S 参数/热仿真模型的元数据与下载。
- 数据与接口要点：
  - 资源元数据：标题、场景标签、关联器件、版本、附件。
  - 工单：提问、分类、优先级、状态、处理人。
- 前端交互：
  - 资源库：过滤/搜索，下载权限提示。
  - 工单：提交表单、状态时间线、追问/回复。
- 验收：
  - 资源可按场景/器件筛选与下载记录；工单可创建、查看、状态更新。

### 5) 质量管理
- 目标：质量事件全生命周期管理与可追溯。
- 核心功能：
  - 质量问题上报：问题分类、严重度、批次/器件关联、证据上传。
  - 流程与分配：状态流转（新建/分析/整改/验证/关闭），指派责任人，超时提醒。
  - 归零/措施：根因分析（5Why/鱼骨占位）、纠正措施、验证记录。
  - 质量通报：发布与阅读范围控制，阅读确认。
  - 报表与导出：问题清单、状态分布、按供应商/批次统计。
- 数据与接口要点：
  - 问题单模型：分类、严重度、批次、关联器件、附件、操作日志。
  - 通报模型：标题、范围、确认记录。
- 前端交互：
  - 表单校验、状态时间线、附件列表；通报列表与确认按钮。
- 验收：
  - 问题上报到关闭链路可走通；指派/提醒记录；通报可发布与确认。

### 6) 试验检测
- 目标：管理试验申请、计划、报告与数据。
- 核心功能：
  - 试验申请：TID/SEE/DD 等类型，样品信息、条件、计划时间。
  - 计划与执行：排期、状态（待排期/进行中/已完成）、实验室/设备信息。
  - 报告管理：报告元数据、版本、下载控制；结果摘要（通过/不通过/指标数值）。
  - 数据管理占位：原始数据上传元数据。
- 数据与接口要点：
  - 申请/计划/报告模型；与器件/批次/供应商关联。
- 前端交互：
  - 申请表单；计划列表与状态；报告列表与下载。
- 验收：
  - 申请→计划→报告可查询；状态正确；报告可下载（含权限提示）。

### 7) 资料培训
- 目标：集中培训与资料下载，记录学习行为。
- 核心功能：
  - 培训课程/资料库：按主题/角色/模块分类；可搜索；可下载或在线观看占位。
  - 进度与记录：学习完成度占位，下载记录。
  - 通知与日程：培训日历、报名/预约占位。
- 数据与接口要点：
  - 课程/资料元数据；报名/记录模型。
- 前端交互：
  - 列表筛选，详情页，下载/报名按钮，进度展示（占位）。
- 验收：
  - 课程/资料可搜索筛选；下载或报名可用；记录可查询。

### 8) 首页与全局
- 目标：统一入口、快速搜索、推荐与跳转。
- 核心功能：
  - 全局搜索框：跳转到器件查询页并带入关键字。
  - 快捷入口：导航模块入口卡片；热门搜索词。
  - 公告/通告：面向全站展示。
- 验收：
  - 搜索跳转正确；入口可达；公告可见可配置。

## 技术与非功能需求
- API 统一：分页、排序、错误码、鉴权头一致；OpenAPI 契约。
- 缓存：分类树与 facets 使用 Redis；热点列表可缓存；空结果短 TTL 防穿透。
- 索引：按查询条件建立（familyPath、manufacturer、quality_grade、stock_status、lifecycle 等）；慢查询跟踪。
- 安全：JWT 登录；基础权限占位；下载/导出记录；输入输出校验（前端 DOMPurify 用于富文本/HTML）。
- 日志与监控：请求日志、错误日志、缓存命中率、关键接口 P95；审计操作（创建/更新/下载）。


