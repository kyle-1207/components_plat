# DoEEEt 动态参数表头测试指南

## 🚀 快速测试步骤

### 前置条件

1. **后端服务运行**
   ```bash
   cd backend
   npm run dev
   # 应该看到: Server running on http://localhost:3001
   ```

2. **前端服务运行**
   ```bash
   cd frontend
   npm run dev
   # 应该看到: Local: http://localhost:3000
   ```

3. **数据库连接**
   - MongoDB 已启动并包含 DoEEEt 数据
   - Redis 已启动（用于缓存）

---

## 📋 测试清单

### Test 1: 页面加载

**目标**: 验证页面正常加载，无控制台错误

**步骤**:
1. 打开浏览器访问 http://localhost:3000
2. 进入"组件搜索"页面
3. 打开浏览器控制台（F12）

**预期结果**:
- ✅ 页面正常加载
- ✅ 无 JavaScript 错误
- ✅ 无 TypeScript 编译错误
- ✅ 分类筛选卡片显示
- ✅ 器件查询表单显示

**实际结果**: ___________

---

### Test 2: 分类筛选功能

**目标**: 验证 CategoryFilter 组件正常工作

**步骤**:
1. 在分类筛选卡片中点击级联选择器
2. 选择一个分类路径（如：Microcircuits > Analog ICs > Amplifiers）
3. 观察控制台输出

**预期结果**:
- ✅ 级联选择器展开
- ✅ 可以逐层选择分类
- ✅ 选中后显示完整路径
- ✅ 控制台输出: `选中的分类路径: ["Microcircuits", "Analog ICs", "Amplifiers"]`

**实际结果**: ___________

---

### Test 3: 基础搜索功能

**目标**: 验证搜索功能正常工作

**步骤**:
1. 在"器件型号"输入框输入关键词（如：`860300`）
2. 点击"搜索"按钮
3. 等待搜索结果

**预期结果**:
- ✅ 显示加载状态
- ✅ 返回搜索结果
- ✅ 表格显示组件列表
- ✅ 显示搜索结果数量

**实际结果**: ___________

---

### Test 4: 动态参数表头显示

**目标**: 验证动态参数列正确生成和显示

**步骤**:
1. 执行搜索（参考 Test 3）
2. 查看表格表头
3. 观察静态列和动态参数列

**预期结果**:
- ✅ 静态列显示：器件型号、制造商、分类等
- ✅ 动态参数列显示：根据数据动态生成
- ✅ 列数量 = 静态列数 + 动态参数数
- ✅ 表头水平滚动正常

**实际结果**: ___________

**截图位置**: ___________ (建议截图保存)

---

### Test 5: short_name + Tooltip 显示

**目标**: 验证参数简写和 Tooltip 正确显示

**步骤**:
1. 在搜索结果表格中查找有 `short_name` 的参数列
2. 鼠标悬停在该列表头上
3. 观察 Tooltip 显示

**预期结果**:
- ✅ 表头显示简写（如 `#Pins`）
- ✅ 鼠标悬停显示完整名称（如 `Number of Pins`）
- ✅ Tooltip 位置正确（顶部居中）
- ✅ 简写下方有虚线下划线

**测试样例**:
| short_name | 完整 name | 是否显示 Tooltip |
|-----------|----------|----------------|
| #Pins | Number of Pins | ✅ / ❌ |
| T<sub>STG</sub> | Storage Temperature Range | ✅ / ❌ |
| V<sub>CC</sub> | Supply Voltage | ✅ / ❌ |

**实际结果**: ___________

---

### Test 6: HTML 标签渲染

**目标**: 验证 `<sub>`, `<sup>` 等 HTML 标签正确渲染

**步骤**:
1. 查找包含 HTML 标签的参数列（如 `T<sub>STG</sub>`）
2. 观察表头显示效果

**预期结果**:
- ✅ `<sub>` 标签渲染为下标（如 T<sub>STG</sub>）
- ✅ `<sup>` 标签渲染为上标（如 V<sup>2</sup>）
- ✅ 不显示 HTML 源代码
- ✅ 样式正确

**测试样例**:
| HTML | 预期显示 | 实际显示 |
|------|---------|---------|
| `T<sub>STG</sub>` | T<sub>STG</sub> | _________ |
| `V<sup>2</sup>` | V<sup>2</sup> | _________ |

**实际结果**: ___________

---

### Test 7: 无 short_name 的参数

**目标**: 验证无 `short_name` 的参数直接显示完整名称

**步骤**:
1. 查找无 `short_name` 的参数列
2. 观察表头显示

**预期结果**:
- ✅ 表头直接显示完整 `name`（如 `TNID Comments`）
- ✅ 无 Tooltip
- ✅ 无虚线下划线

**测试样例**:
| name | 有 short_name? | 表头显示 | 有 Tooltip? |
|------|---------------|---------|------------|
| TNID Comments | ❌ | TNID Comments | ❌ |
| Manufacturer | ❌ | Manufacturer | ❌ |

**实际结果**: ___________

---

### Test 8: 参数值显示

**目标**: 验证动态参数列的值正确显示

**步骤**:
1. 查看搜索结果中的参数列数据
2. 对比多个组件的参数值

**预期结果**:
- ✅ 参数值正确显示
- ✅ 无值时显示 `-`
- ✅ 数组值用逗号分隔（如 `value1, value2`）
- ✅ 超长值显示省略号

**测试样例**:
| 组件 | #Pins | T<sub>STG</sub> | 是否正确 |
|------|-------|----------------|---------|
| 860300YA | 68 | -55°C~150°C | ✅ / ❌ |
| 860301YA | 72 | -40°C~125°C | ✅ / ❌ |

**实际结果**: ___________

---

### Test 9: 列排序功能

**目标**: 验证动态参数列可排序

**步骤**:
1. 点击动态参数列的表头
2. 观察排序效果

**预期结果**:
- ✅ 点击表头显示排序图标
- ✅ 数据按升序排列
- ✅ 再次点击按降序排列
- ✅ 第三次点击取消排序

**实际结果**: ___________

---

### Test 10: 导出 CSV 功能

**目标**: 验证导出 CSV 功能正常工作

**步骤**:
1. 执行搜索并显示结果
2. 点击"导出CSV"按钮
3. 检查下载的文件

**预期结果**:
- ✅ 显示成功消息：`导出成功！`
- ✅ CSV 文件自动下载
- ✅ 文件名格式：`components_export_时间戳.csv`
- ✅ 文件包含所有参数列
- ✅ 文件包含所有组件数据
- ✅ 表头使用参数的完整 `name`
- ✅ 中文显示正常（UTF-8编码）

**检查 CSV 内容**:
```csv
器件型号,制造商,Number of Pins,Storage Temperature Range,...
860300YA,SIB International,68,-55°C~150°C,...
860301YA,SIB International,72,-40°C~125°C,...
```

**实际结果**: ___________

---

### Test 11: 分类筛选联动

**目标**: 验证选择分类后搜索结果更新

**步骤**:
1. 选择一个分类（如 Microcircuits）
2. 点击"搜索"按钮
3. 观察搜索结果和参数列

**预期结果**:
- ✅ 搜索参数包含 `familyPath`
- ✅ 返回该分类下的组件
- ✅ 动态参数列根据该分类更新
- ✅ 参数列数量可能变化（不同分类有不同参数）

**实际结果**: ___________

---

### Test 12: 响应式布局

**目标**: 验证表格在不同屏幕尺寸下正常显示

**步骤**:
1. 调整浏览器窗口大小
2. 观察表格布局变化

**预期结果**:
- ✅ 表格支持水平滚动
- ✅ 器件型号列固定在左侧
- ✅ 操作列固定在右侧
- ✅ 中间列可滚动
- ✅ 窗口缩小时表格不错位

**实际结果**: ___________

---

### Test 13: 性能测试

**目标**: 验证大数据量下性能

**步骤**:
1. 执行搜索返回 100+ 条结果
2. 观察渲染速度和流畅度

**预期结果**:
- ✅ 初始渲染 < 2s
- ✅ 滚动流畅
- ✅ 排序响应快速
- ✅ 无明显卡顿

**实际测量**:
- 初始渲染时间: _________
- 排序响应时间: _________
- 滚动流畅度: ⭐⭐⭐⭐⭐ (1-5星)

**实际结果**: ___________

---

### Test 14: 错误处理

**目标**: 验证错误情况下的处理

**步骤**:
1. 停止后端服务
2. 执行搜索
3. 观察错误提示

**预期结果**:
- ✅ 显示错误消息
- ✅ 使用模拟数据降级
- ✅ 不会白屏或崩溃
- ✅ 用户可以继续操作

**实际结果**: ___________

---

## 🐛 Bug 报告模板

如果发现问题，请填写以下信息：

```
Bug ID: _________
严重程度: □ 严重 □ 中等 □ 轻微

**问题描述**:
_______________________________________________________

**复现步骤**:
1. _______________________________________________________
2. _______________________________________________________
3. _______________________________________________________

**预期结果**:
_______________________________________________________

**实际结果**:
_______________________________________________________

**环境信息**:
- 浏览器: _________
- 版本: _________
- 操作系统: _________

**截图/录屏**:
_______________________________________________________

**控制台错误**:
_______________________________________________________
```

---

## ✅ 测试总结

### 通过的测试
- [ ] Test 1: 页面加载
- [ ] Test 2: 分类筛选功能
- [ ] Test 3: 基础搜索功能
- [ ] Test 4: 动态参数表头显示
- [ ] Test 5: short_name + Tooltip 显示
- [ ] Test 6: HTML 标签渲染
- [ ] Test 7: 无 short_name 的参数
- [ ] Test 8: 参数值显示
- [ ] Test 9: 列排序功能
- [ ] Test 10: 导出 CSV 功能
- [ ] Test 11: 分类筛选联动
- [ ] Test 12: 响应式布局
- [ ] Test 13: 性能测试
- [ ] Test 14: 错误处理

### 发现的问题
1. _______________________________________________________
2. _______________________________________________________
3. _______________________________________________________

### 改进建议
1. _______________________________________________________
2. _______________________________________________________
3. _______________________________________________________

---

## 📊 测试报告

**测试日期**: _________  
**测试人员**: _________  
**测试环境**:
- 前端版本: _________
- 后端版本: _________
- 数据库: MongoDB _________
- 缓存: Redis _________

**测试结果**:
- 总测试数: 14
- 通过数: _________
- 失败数: _________
- 通过率: _________%

**建议**:
- □ 可以发布
- □ 需要修复后发布
- □ 需要重大改进

**签名**: _________

---

## 🎯 下一步

### 如果所有测试通过
1. 合并到主分支
2. 更新版本号
3. 编写发布说明
4. 部署到测试环境

### 如果有测试失败
1. 记录所有 Bug
2. 按优先级修复
3. 重新测试
4. 更新测试报告

---

## 📞 联系方式

**问题反馈**: _________  
**技术支持**: _________  

**相关文档**:
- [DoEEEt-README.md](./DoEEEt-README.md)
- [动态参数表头-快速开始.md](./frontend/docs/动态参数表头-快速开始.md)
- [DoEEEt动态参数表头集成完成总结.md](./DoEEEt动态参数表头集成完成总结.md)

---

**祝测试顺利！** 🚀

